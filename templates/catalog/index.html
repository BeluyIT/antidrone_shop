{% extends 'base.html' %}
{% load static %}

{% block title %}ANTIDRONE.CC - Professional UAV Countermeasures{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="hero-background"></div>
    <div class="hero-content">
        <h1 class="hero-title">ANTIDRONE<span class="accent">.CC</span></h1>
        <p class="hero-subtitle">Професійні системи протидії БПЛА</p>
        <p class="hero-description">B2B рішення для виявлення та нейтралізації дронів. Зручне замовлення через Telegram.</p>
        <a href="{% url 'catalog:category_list' %}" class="btn btn-primary btn-lg">
            <i class="bi bi-grid-3x3-gap"></i>
            Переглянути каталог
        </a>
    </div>
</section>

<!-- Popular Products -->
{% if popular_products %}
<section class="section">
    <div class="container">
        <h2 class="section-title"><span>Популярні</span> рішення</h2>
        <div class="section-divider"></div>

        <div class="products-grid">
            {% for product in popular_products %}
            <article class="product-card">
                <div class="product-card-image">
                    {% with main_image=product.get_main_image %}
                    {% if main_image %}
                    <img src="{{ main_image.image.url }}" alt="{{ product.name }}">
                    {% else %}
                    <span class="product-card-placeholder">NO IMAGE</span>
                    {% endif %}
                    {% endwith %}
                    <span class="product-badge badge-popular">Popular</span>
                </div>
                <div class="product-card-body">
                    <h3 class="product-card-title">
                        <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
                    </h3>
                    {% if product.sku %}
                    <div class="product-card-sku">{{ product.sku }}</div>
                    {% endif %}
                    {% if product.description %}
                    <p class="product-card-description">{{ product.description|truncatewords:12 }}</p>
                    {% endif %}
                    <div class="product-card-footer">
                        <div class="product-price">
                            {% if product.price %}
                            <span class="product-price-current">{{ product.price|floatformat:0 }} UAH</span>
                            {% endif %}
                        </div>
                        <a href="{{ product.get_absolute_url }}" class="btn btn-primary">Детальніше</a>
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- New Products -->
{% if new_products %}
<section class="section section-dark">
    <div class="container">
        <h2 class="section-title"><span>Новинки</span></h2>
        <div class="section-divider"></div>

        <div class="products-grid">
            {% for product in new_products %}
            <article class="product-card">
                <div class="product-card-image">
                    {% with main_image=product.get_main_image %}
                    {% if main_image %}
                    <img src="{{ main_image.image.url }}" alt="{{ product.name }}">
                    {% else %}
                    <span class="product-card-placeholder">NO IMAGE</span>
                    {% endif %}
                    {% endwith %}
                    <span class="product-badge badge-new">New</span>
                </div>
                <div class="product-card-body">
                    <h3 class="product-card-title">
                        <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
                    </h3>
                    {% if product.sku %}
                    <div class="product-card-sku">{{ product.sku }}</div>
                    {% endif %}
                    {% if product.description %}
                    <p class="product-card-description">{{ product.description|truncatewords:12 }}</p>
                    {% endif %}
                    <div class="product-card-footer">
                        <div class="product-price">
                            {% if product.price %}
                            <span class="product-price-current">{{ product.price|floatformat:0 }} UAH</span>
                            {% endif %}
                        </div>
                        <a href="{{ product.get_absolute_url }}" class="btn btn-primary">Детальніше</a>
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Categories -->
{% if categories %}
<section class="section">
    <div class="container">
        <h2 class="section-title"><span>Категорії</span> обладнання</h2>
        <div class="section-divider"></div>

        <div class="categories-grid">
            {% for category in categories %}
            <a href="{{ category.get_absolute_url }}" class="category-card">
                <div class="category-icon">
                    {% if category.slug == 'anteny' %}
                    <i class="bi bi-broadcast-pin"></i>
                    {% elif category.slug == 'moduli' %}
                    <i class="bi bi-cpu"></i>
                    {% else %}
                    <i class="bi bi-box"></i>
                    {% endif %}
                </div>
                <h3 class="category-title">{{ category.name }}</h3>
                {% if category.description %}
                <p class="category-description">{{ category.description|truncatewords:15 }}</p>
                {% endif %}
                <span class="category-count">{{ category.get_descendant_count }} підкатегорій</span>
            </a>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}
{% endblock %}
